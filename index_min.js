$(function(){function t(t,e,i,s,h){this.x=t,this.y=e,this.width=i,this.height=s,this.img=new Image,this.img.src=h,this.active=!0,console.log("create sprite")}function e(t,e){this.x=t,this.y=e,this.width=40,this.height=10,this.img=new Image,this.img.src="./square.PNG",this.active=!0,console.log("create player")}function i(t,e){this.x=t,this.y=e,this.width=10,this.height=10,this.img=new Image,this.img.src="./square2.PNG",this.speedX=3,this.speedY=3,this.active=!0,console.log("create ball")}function s(t,e){this.x=t,this.y=e,this.startX=t,this.width=22,this.height=16,this.img=new Image,this.img.src="./inv.PNG",this.offsetX=0,this.maxX=20,this.speedX=.2,this.active=!0,console.log("create invader")}function h(t,e,i){for(var s in e)e[s].active&&(e[s].draw(t),e[s].update(i)),0!=s&&e[s].active&&o(e[0],e[s])&&(e[0].speedY=-e[0].speedY,s>1&&(e[s].active=!1,n--));t.fillStyle="yellow",t.fillText(""+n,10,758)}function o(t,e){return!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y)}var n=0;t.prototype.draw=function(t){t.drawImage(this.img,this.x,this.y,this.width,this.height)},t.prototype.update=function(t){},t.prototype.move=function(t,e){this.x=this.x+t,this.y=this.y+e},e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.prototype.update=function(t){t.d&&this.move(10,0),t.a&&this.move(-10,0)},i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.prototype.update=function(t){this.move(this.speedX,this.speedY),this.x<0&&(this.x=0,this.speedX=-this.speedX),this.x>502&&(this.x=502,this.speedX=-this.speedX),this.y<0&&(this.y=0,this.speedY=-this.speedY)},s.prototype=Object.create(t.prototype),s.prototype.constructor=s,s.prototype.update=function(t){this.move(this.speedX,0),Math.abs(this.x-this.startX)>this.maxX&&(this.speedX=-this.speedX)};var r=function(){var t=[],h=new e(256,758),o=new i(256,369);t.push(o),t.push(h);for(var r=0;r<8;r++)for(var p=0;p<15;p++)t.push(new s(30+30*p,30+20*r)),n++;return t}(),p=[];!function(t){$("body").keydown(function(e){t[e.key]=!0}),$("body").keyup(function(e){t[e.key]=!1})}(p);var a=document.getElementById("myCanvas");a.width=512,a.height=768,function(t,e,i){var s=t.getContext("2d");s.fillStyle="black",s.strokeStyle="red",s.lineWidth="1",s.imageSmoothingEnabled=!1,s.font="30px Arial",setInterval(function(){s.clearRect(0,0,t.width,t.height),s.fillStyle="black",s.fillRect(0,0,t.width,t.height),h(s,e,i)},33)}(a,r,p)});